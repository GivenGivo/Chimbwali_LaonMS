{% load static %}
<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <title>Total Expected Funds - CEO Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="icon"
      type="image/png"
      href="{% static 'images/logo-icon.png' %}"
    />
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: { DEFAULT: "#5B21B6", dark: "#7C3AED" },
              accent: "#06b6d4",
              surface: { DEFAULT: "#fff", dark: "#18181b" },
            },
            boxShadow: {
              neu: "0 4px 24px rgba(0,0,0,0.1), 0 1.5px 4px rgba(91,33,182,0.1)",
            },
          },
        },
      };
    </script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
  </head>

    <a 
      href="{% url 'ceo_dashboard' %}" 
      class="fixed top-4 left-4 z-50 bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition"
    >
      <i class="fa-solid fa-house mr-1"></i> Back Home
    </a>
    
  <body
    class="bg-gradient-to-bl from-primary/10 via-accent/10 to-slate-100 dark:from-surface-dark dark:via-primary-dark/10 dark:to-surface-dark min-h-screen p-6 font-sans transition-colors duration-300"
  >
    <div
      id="preloader"
      class="fixed inset-0 flex items-center justify-center bg-blue z-50"
    >
      <img
        src="{% static 'images/logo.png' %}"
        alt="Company Logo"
        class="animate-spin w-20 h-20"
      />
    </div>

    <section
      class="max-w-6xl mx-auto bg-white dark:bg-surface-dark shadow-neu rounded-3xl p-8 md:p-10"
    >
      <div class="mb-10">
        <h1 class="text-3xl font-extrabold text-primary dark:text-accent mb-2">
          <i class="fa-solid fa-coins mr-2"></i> Total Expected Repayment
        </h1>
        <p class="text-4xl font-bold text-green-600 dark:text-green-400">
          ZMW {{ total_expected }}
        </p>
      </div>

      <div class="overflow-x-auto">
        <table
          class="min-w-full text-sm text-left text-gray-800 dark:text-gray-200"
        >
          <thead
            class="text-xs uppercase bg-primary/5 dark:bg-accent/10 text-gray-700 dark:text-gray-300"
          >
            <tr>
              <th class="px-6 py-3 rounded-l-xl">Loan Officer</th>
              <th class="px-6 py-3">Clients</th>
              <th class="px-6 py-3">Total Loans (ZMW)</th>
              <th class="px-6 py-3">Total Paid (ZMW)</th>
              <th class="px-6 py-3 rounded-r-xl">Outstanding Balance (ZMW)</th>
            </tr>
          </thead>
          <tbody>
            {% for officer in officer_data %}
            <tr
              class="bg-white dark:bg-surface-dark shadow-sm border-b border-gray-100 dark:border-gray-800"
            >
              <td class="px-6 py-4 font-semibold">{{ officer.name }}</td>
              <td class="px-6 py-4">{{ officer.approved_clients }}</td>
              <td class="px-6 py-4 text-blue-600 dark:text-blue-400 font-bold">
                ZMW {{ officer.total_loans|floatformat:2 }}
              </td>
              <td
                class="px-6 py-4 text-green-600 dark:text-green-400 font-bold"
              >
                ZMW {{ officer.total_paid|floatformat:2 }}
              </td>
              <td class="px-6 py-4 text-red-600 dark:text-red-400 font-bold">
                ZMW {{ officer.balance|floatformat:2 }}
              </td>
            </tr>
            {% empty %}
            <tr>
              <td
                colspan="5"
                class="text-center py-6 text-gray-500 dark:text-gray-400"
              >
                No officer data available.
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>

    <script>
      window.addEventListener("load", function () {
        const preloader = document.getElementById("preloader");
        if (preloader) {
          preloader.style.opacity = "0";
          preloader.style.visibility = "hidden";
          preloader.style.transition = "opacity 0.5s ease";
          setTimeout(() => preloader.remove(), 600);
        }
      });
    </script>
  </body>
</html>
