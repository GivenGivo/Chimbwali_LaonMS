{% load static %}
<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Accumulated Balances - CEO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="icon"
      type="image/png"
      href="{% static 'images/logo-icon.png' %}"
    />

    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: { DEFAULT: "#5B21B6", dark: "#7C3AED" },
              accent: "#06b6d4",
              surface: { DEFAULT: "#fff", dark: "#18181b" },
            },
            boxShadow: {
              neu: "0 4px 24px rgba(0,0,0,0.1), 0 1.5px 4px rgba(91,33,182,0.1)",
            },
          },
        },
      };
    </script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
  </head>

    <a 
      href="{% url 'ceo_dashboard' %}" 
      class="fixed top-4 left-4 z-50 bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition"
    >
      <i class="fa-solid fa-house mr-1"></i> Back Home
    </a>

  <body
    class="bg-gradient-to-bl from-primary/10 via-accent/10 to-slate-100 dark:from-surface-dark dark:via-primary-dark/10 dark:to-surface-dark min-h-screen p-6 font-sans transition-colors duration-300"
  >
    <div
      id="preloader"
      class="fixed inset-0 flex items-center justify-center bg-blue z-50"
    >
      <img
        src="{% static 'images/logo.png' %}"
        alt="Company Logo"
        class="animate-spin w-20 h-20"
      />
    </div>

    <section
      class="max-w-6xl mx-auto bg-white dark:bg-surface-dark shadow-neu rounded-3xl p-8 md:p-10"
    >
      <!-- Header -->
      <div
        class="flex justify-between items-center border-b border-gray-200 dark:border-gray-700 pb-4 mb-6"
      >
        <h2
          class="text-2xl md:text-3xl font-extrabold text-primary dark:text-accent flex items-center gap-3"
        >
          <i class="fa-solid fa-wallet text-xl"></i>
          Accumulated Balances
        </h2>
      </div>

      <!-- Table -->
      <div class="overflow-x-auto">
        <table
          class="min-w-full text-sm text-left text-gray-800 dark:text-gray-200"
        >
          <thead
            class="text-xs uppercase bg-primary/5 dark:bg-accent/10 text-gray-700 dark:text-gray-300"
          >
            <tr>
              <th class="px-6 py-3 rounded-l-xl">Client Name</th>
              <th class="px-6 py-3">Total Loans (ZMW)</th>
              <th class="px-6 py-3">Total Paid (ZMW)</th>
              <th class="px-6 py-3 rounded-r-xl">Balance (ZMW)</th>
            </tr>
          </thead>
          <tbody>
            {% for client in clients_data %}
            <tr
              class="bg-white dark:bg-surface-dark shadow-sm rounded-xl border border-gray-100 dark:border-gray-800 mb-2"
            >
              <td
                class="px-6 py-4 font-semibold text-gray-800 dark:text-white rounded-l-xl"
              >
                {{ client.client.full_name }}
              </td>
              <td class="px-6 py-4 font-bold text-blue-600 dark:text-blue-400">
                ZMW {{ client.total_loan_amount|floatformat:2 }}
              </td>
              <td
                class="px-6 py-4 font-bold text-green-600 dark:text-green-400"
              >
                ZMW {{ client.total_paid|floatformat:2 }}
              </td>
              <td
                class="px-6 py-4 font-bold text-red-600 dark:text-red-400 rounded-r-xl"
              >
                ZMW {{ client.balance|floatformat:2 }}
              </td>
            </tr>
            {% empty %}
            <tr>
              <td
                colspan="4"
                class="text-center py-6 text-gray-500 dark:text-gray-400"
              >
                No data available.
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>
    <script>
      window.addEventListener("load", function () {
        const preloader = document.getElementById("preloader");
        if (preloader) {
          preloader.style.opacity = "0";
          preloader.style.visibility = "hidden";
          preloader.style.transition = "opacity 0.5s ease";

          // Optionally, remove from DOM after transition ends
          setTimeout(() => preloader.remove(), 600);
        }
      });
    </script>
  </body>
</html>
